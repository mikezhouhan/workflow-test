# Interview Coder 多语言支持实施计划

## 概述
该计划详细说明了如何在Interview Coder应用中实现中文和英文的多语言支持。目前应用程序仅支持英文界面，我们需要添加完整的国际化(i18n)支持以满足不同用户的需求。

## 1. 项目设置

- [ ] 安装i18n依赖
  - 安装react-i18next和i18next库
  - 安装i18next-browser-languagedetector用于自动检测用户浏览器语言
  - 安装i18next-http-backend（可选，用于从服务器加载翻译文件）

- [ ] 创建多语言目录结构
  - 在`public/locales/`目录下创建语言文件夹（en, zh-CN）
  - 为每种语言创建翻译JSON文件
  - 设置翻译文件组织结构（按功能模块分组）

- [ ] 配置i18next
  - 创建i18n配置文件
  - 设置默认语言和备用语言
  - 配置语言检测策略
  - 设置语言切换功能

## 2. 后端国际化

- [ ] 修改ProcessingHelper.ts
  - 更新AI提示以支持多语言响应
  - 在API请求中包含当前语言设置
  - 修改生成解决方案的逻辑以支持多语言输出

- [ ] 更新配置系统
  - 在ConfigHelper.ts中添加语言设置
  - 提供获取/设置当前语言的接口
  - 持久化用户语言偏好设置

- [ ] 更新IPC处理程序
  - 在ipcHandlers.ts中添加语言切换处理程序
  - 在所有返回用户可见文本的处理程序中添加多语言支持

## 3. 前端国际化基础

- [ ] 创建翻译上下文
  - 在`renderer/contexts/`目录下创建i18n上下文
  - 提供语言切换功能
  - 提供多语言文本访问接口

- [ ] 集成React应用
  - 在App.tsx中集成i18n提供者
  - 在根组件中初始化多语言支持
  - 设置语言检测和默认语言逻辑

- [ ] 创建语言选择器组件
  - 设计语言切换UI组件
  - 实现语言切换逻辑
  - 在应用中适当位置集成语言选择器

- [ ] 语言切换按钮放置位置
  - 在Header组件中添加简洁版（minimal）切换按钮
    ```tsx
    // renderer/components/Header/Header.tsx
    <div className="flex items-center space-x-2">
      {/* 其他Header元素 */}
      <LanguageSwitcher variant="minimal" />
    </div>
    ```
  - 在设置对话框中添加完整版切换器
    ```tsx
    // renderer/components/Settings/SettingsDialog.tsx
    <div className="space-y-4">
      {/* API Key设置等 */}
      <LanguageSwitcher variant="full" />
      {/* 其他设置项 */}
    </div>
    ```
  - 在初始API密钥输入/欢迎界面添加切换器
    ```tsx
    // 欢迎界面或API密钥输入页面
    <div className="mt-4">
      <LanguageSwitcher />
    </div>
    ```
  - 考虑添加浮动最小化按钮（对于隐形模式下的访问）
    ```tsx
    // 在App.tsx或适当组件中
    <div className="fixed bottom-4 right-4 z-50 opacity-70 hover:opacity-100 transition-opacity">
      <LanguageSwitcher variant="minimal" />
    </div>
    ```

## 4. 翻译文件结构

- [ ] 创建主界面翻译
  - 翻译应用名称和标题
  - 翻译公共UI元素（按钮、对话框、提示等）
  - 翻译错误信息和状态提示

- [ ] 创建功能模块翻译
  - 队列管理页面翻译
  - 解决方案页面翻译
  - 调试页面翻译
  - 设置对话框翻译

- [ ] 创建特定功能翻译
  - 翻译AI生成内容相关文本
  - 翻译配置和设置选项
  - 翻译快捷键提示和帮助文本

## 5. 组件国际化

- [ ] 更新UI基础组件
  - 修改button.tsx, card.tsx, dialog.tsx, input.tsx, toast.tsx等支持多语言
  - 在需要的地方使用翻译钩子替换硬编码文本

- [ ] 更新页面组件
  - 修改App.tsx中的文本使用翻译函数
  - 更新_pages目录下所有页面组件
  - 替换所有硬编码文本为翻译函数调用

- [ ] 更新功能组件
  - 更新Header组件支持多语言
  - 更新Queue相关组件支持多语言
  - 更新Solution相关组件支持多语言
  - 更新Settings相关组件支持多语言

## 6. 集成测试

- [ ] 界面测试
  - 测试语言切换功能
  - 验证所有UI元素在切换语言后正确显示
  - 测试特殊字符和长文本的布局

- [ ] 功能测试
  - 测试保存语言偏好功能
  - 测试自动检测语言功能
  - 测试在不同语言下完成完整工作流

- [ ] 边缘情况测试
  - 测试缺失翻译的回退行为
  - 测试语言文件加载失败的场景
  - 测试动态内容的翻译

## 7. 文档

- [ ] 更新开发文档
  - 文档化多语言支持架构
  - 提供添加新语言的指南
  - 记录翻译文件的组织方式

- [ ] 更新用户指南
  - 添加语言切换说明
  - 更新截图以显示多语言界面
  - 提供中英文版本的用户手册

## 8. 部署

- [ ] 构建流程更新
  - 更新构建脚本支持多语言文件
  - 确保翻译文件被正确打包
  - 测试不同平台下的多语言支持

- [ ] 发布流程
  - 准备发布说明，强调新增多语言支持
  - 更新应用版本号
  - 准备多语言宣传材料

## 9. 维护

- [ ] 翻译维护流程
  - 建立新增文本的翻译流程
  - 设定翻译质量审核机制
  - 规划未来支持更多语言的路径

## 实施步骤

### 第一阶段：基础设置（预计2天）
1. 安装必要依赖
2. 创建基本目录结构
3. 配置i18next
4. 集成React应用

### 第二阶段：翻译文件准备（预计3天）
1. 提取所有需要翻译的文本
2. 创建英文翻译文件作为基准
3. 创建中文翻译文件
4. 组织翻译文件结构

### 第三阶段：组件更新（预计4天）
1. 更新基础UI组件
2. 更新页面组件
3. 更新功能组件
4. 添加语言选择器

### 第四阶段：后端支持（预计2天）
1. 更新配置系统
2. 添加语言设置持久化
3. 修改AI处理流程支持多语言

### 第五阶段：测试与部署（预计3天）
1. 进行UI和功能测试
2. 修复发现的问题
3. 更新文档
4. 准备发布 